(this["webpackJsonpexpense-tracker-react"]=this["webpackJsonpexpense-tracker-react"]||[]).push([[0],{30:function(e,t,a){e.exports=a(58)},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),o=a.n(l),s=a(12),c=a(10),i=function(){return r.a.createElement("h2",null,"Expense Tracker")},m=a(9),u=a(2),d=a(6),p=function(e,t){return e.min&&t.trim().length<e.min?{isValid:!1,message:"Minimum of ".concat(e.min," characters")}:e.max&&t.trim().length>e.max?{isValid:!1,message:"Maximum of ".concat(e.max," characters")}:{isValid:!0,message:""}},g=function(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)?{isValid:!0,message:""}:{isValid:!1,message:"Please enter proper Email address"}},E=function(e,t){switch(t.type){case"DELETE_TRANSACTION":case"ADD_TRANSACTION":return Object(u.a)({},e,{user:Object(u.a)({},e.user,{transactions:t.payload})});case"SET_USER":return Object(u.a)({},e,{user:t.payload});default:return e}},f={transactions:[],user:{transactions:[]}},h=Object(n.createContext)(f),b=function(e){var t=e.children,a=Object(n.useReducer)(E,f),l=Object(d.a)(a,2),o=l[0],s=l[1];return r.a.createElement(h.Provider,{value:{transactions:o.user.transactions,user:o.user,deleteTransaction:function(e){s({type:"DELETE_TRANSACTION",payload:e})},addTransaction:function(e){s({type:"ADD_TRANSACTION",payload:e})},setUser:function(e){s({type:"SET_USER",payload:e})}}},t)},v=a(8),S=a.n(v);function O(){var e=Object(n.useState)({email:"",password:"",rememberMe:!0}),t=Object(d.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)({email:{isValid:!0,message:""},password:{isValid:!0,message:""}}),s=Object(d.a)(o,2),i=s[0],E=s[1],f=Object(n.useContext)(h).setUser,b=function(e,t){l(Object(u.a)({},a,Object(m.a)({},t,e.target.value)))},v=function(e){E(Object(u.a)({},i,Object(m.a)({},e,{isValid:!0,message:""})))};return localStorage.getItem("token")||sessionStorage.getItem("token")?r.a.createElement(c.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=g(a.email);return t.isValid?(t=p({min:6},a.password)).isValid?void S.a.post("https://expense-tracker-deltanboi.herokuapp.com/auth/login",{email:a.email,password:a.password}).then((function(e){f(e.data.user),a.rememberMe?(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user))):(sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("user",JSON.stringify(e.data.user))),window.location.replace("/")})).catch((function(e){return console.log(e)})):E(Object(u.a)({},i,{password:{isValid:!1,message:"Password should be atleast 6 characters long"}})):E(Object(u.a)({},i,{email:{isValid:!1,message:"Please enter valid email"}}))}(e)}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",name:"email",value:a.email,onChange:function(e){return b(e,"email")},placeholder:"Enter email...",onFocus:function(){return v("email")}}),!i.email.isValid&&r.a.createElement("p",null,i.email.message)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:a.password,onChange:function(e){return b(e,"password")},placeholder:"Enter password...",onFocus:function(){return v("password")}}),!i.password.isValid&&r.a.createElement("p",null,i.password.message)),r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:function(e){return l(Object(u.a)({},a,{rememberMe:e.target.checked}))}}),r.a.createElement("span",null,"Remember me")),r.a.createElement("button",{type:"submit",className:"btn"},"Login")),r.a.createElement("hr",null),r.a.createElement("p",null,"Don't have an account? \xa0\xa0",r.a.createElement("a",{href:"/signup"},"Signup")))}function w(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(d.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)({name:{isValid:!0,message:""},email:{isValid:!0,message:""},password:{isValid:!0,message:""}}),s=Object(d.a)(o,2),i=s[0],E=s[1],f=function(e,t){l(Object(u.a)({},a,Object(m.a)({},t,e.target.value)))},h=function(e){E(Object(u.a)({},i,Object(m.a)({},e,{isValid:!0,message:""})))};return localStorage.getItem("token")||sessionStorage.getItem("token")?r.a.createElement(c.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=a.name.trim()?{isValid:!0,message:""}:{isValid:!1,message:"This field is required"};return t.isValid?(t=g(a.email)).isValid?(t=p({min:6},a.password)).isValid?void S.a.put("https://expense-tracker-deltanboi.herokuapp.com/auth/signup",{name:a.name,email:a.email,password:a.password}).then((function(e){window.location.replace("/login")})).catch((function(e){return console.log(e)})):E(Object(u.a)({},i,{password:{isValid:!1,message:"Password should be atleast 6 characters long"}})):E(Object(u.a)({},i,{email:{isValid:!1,message:"Please enter valid email"}})):E(Object(u.a)({},i,{name:{isValid:!1,message:"Please enter your name"}}))}(e)}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"name"},"Name*"),r.a.createElement("input",{type:"text",name:"name",value:a.name,onChange:function(e){return f(e,"name")},placeholder:"Enter your name...",onFocus:function(){return h("name")}}),!i.name.isValid&&r.a.createElement("p",null,i.name.message)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"Email*"),r.a.createElement("input",{type:"text",name:"email",value:a.email,onChange:function(e){return f(e,"email")},placeholder:"Enter email...",onFocus:function(){return h("email")}}),!i.email.isValid&&r.a.createElement("p",null,i.email.message)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"Password*"),r.a.createElement("input",{type:"password",name:"password",value:a.password,onChange:function(e){return f(e,"password")},placeholder:"Enter password...",onFocus:function(){return h("password")}}),!i.password.isValid&&r.a.createElement("p",null,i.password.message)),r.a.createElement("button",{type:"submit",className:"btn"},"Signup")),r.a.createElement("hr",null),r.a.createElement("p",null,"Have an account? \xa0\xa0",r.a.createElement("a",{href:"/login"},"Login")))}function x(){var e=Object(n.useContext)(h).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return r.a.createElement("div",null,r.a.createElement("h4",null,"Your Balance"),r.a.createElement("h1",null,"$",e))}function j(){var e=Object(n.useContext)(h).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),a=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return r.a.createElement("div",null,r.a.createElement("div",{className:"inc-exp-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Income"),r.a.createElement("p",{className:"money plus"},"+$",t)),r.a.createElement("div",null,r.a.createElement("h4",null,"Expense"),r.a.createElement("p",{className:"money minus"},"-$",a))))}function k(e){var t=e.transaction,a=Object(n.useContext)(h).deleteTransaction,l=t.amount<0?"-":"+";return r.a.createElement("li",{className:t.amount<0?"minus":"plus"},t.text," ",r.a.createElement("span",null,l,"$",Math.abs(t.amount)),r.a.createElement("button",{className:"delete-btn",onClick:function(){S.a.delete("https://expense-tracker-deltanboi.herokuapp.com/transaction/delete-transaction/"+t._id,{headers:{Authorization:localStorage.getItem("token")?"Bearer "+localStorage.getItem("token"):"Bearer "+sessionStorage.getItem("token")}}).then((function(e){a(e.data.transactions)})).catch((function(e){console.log(e)}))}},"x"))}function I(){var e=Object(n.useContext)(h).transactions;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"History"),r.a.createElement("ul",{className:"list"},e.map((function(e){return r.a.createElement(k,{key:e.id,transaction:e})}))))}var N=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(0),s=Object(d.a)(o,2),c=s[0],i=s[1],m=Object(n.useContext)(h).addTransaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add new transaction"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),a?c?void S.a.put("https://expense-tracker-deltanboi.herokuapp.com/transaction/create-transaction",{amount:c,text:a},{headers:{Authorization:localStorage.getItem("token")?"Bearer "+localStorage.getItem("token"):"Bearer "+sessionStorage.getItem("token")}}).then((function(e){if(localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));t.transactions=e.data.transactions,localStorage.setItem("user",JSON.stringify(t)),m(e.data.transactions)}})).catch((function(e){return console.log(e)})):alert("Transaction amount required"):alert("Transaction text required")}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"text"},"Text"),r.a.createElement("input",{type:"text",value:a,onChange:function(e){return l(e.target.value)},placeholder:"Enter text..."})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("br",null),"(negative - expense, positive - income)"),r.a.createElement("input",{type:"number",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Enter amount..."})),r.a.createElement("button",{className:"btn"},"Add transaction")))};function y(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("h4",null,"Hello\xa0",JSON.parse(localStorage.getItem("user")).name),r.a.createElement("button",{onClick:function(){localStorage.token&&(localStorage.removeItem("token"),localStorage.removeItem("user")),sessionStorage.token&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("user")),window.location.reload()},className:"btn",style:{maxWidth:"75px",height:"30px",padding:"0px"}},"Log out"))}function V(){return localStorage.getItem("token")||sessionStorage.getItem("token")?r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement(x,null),r.a.createElement(j,null),r.a.createElement(I,null),r.a.createElement(N,null)):r.a.createElement(c.a,{to:"/login"})}function C(){return r.a.createElement("div",null,r.a.createElement("p",null,"This page does not exist"))}var T=function(e){var t=e.children,a=Object(n.useContext)(h).setUser;return Object(n.useEffect)((function(){localStorage.getItem("user")||sessionStorage.getItem("user")?a(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user"))):a({transactions:[]})}),[]),r.a.createElement("div",{style:{width:"100%",height:"100%"}},t)};a(57);var F=function(){return r.a.createElement(b,null,r.a.createElement(s.a,null,r.a.createElement(T,null,r.a.createElement("div",{className:"container"},r.a.createElement(i,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/login",component:O}),r.a.createElement(c.b,{path:"/signup",component:w}),r.a.createElement(c.b,{path:"/",component:V,exact:!0}),r.a.createElement(c.b,{component:C}))))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.2e22b494.chunk.js.map